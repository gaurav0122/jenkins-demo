pipeline {
    agent any
        stages {
            stage('Build Application') {
                steps {
                    sh 'mvn -f tomcat-maven2/tomcat/pom.xml test package'
                }
                post {
                    success {
                        echo 'Archiving the artifacts'
                        archiveArtifacts artifacts: '**/*.war'
                    }
                }
            }
            stage('Deploy in staging enviorment'){
                steps{
                    echo "staging env job"
                    build job:"Deploy-application-Staging"
                }
            }
            stage('Deploy in Production enviorment'){
                steps{
                    timeout(time:5, unit:'DAYS'){
                        input message:'Approve the PRODUCTION Deployment?'
                    }
                    echo "production env job"
                    build job:"Deploy-application-Staging"
                }
            }
        }
}
